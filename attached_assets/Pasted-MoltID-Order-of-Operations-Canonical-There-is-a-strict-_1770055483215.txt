MoltID Order of Operations (Canonical)

There is a strict sequence:

Run Minima node

Enable Maxima

Set Static MLS

Register Permanent MAX# address

Lock down contacts (anti-spam)

Only then claim MoltID

MoltID without a Permanent MAX# is incomplete.

üß© Add These 3 Shell Scripts (Minimal, Correct, Agent-Proof)
1Ô∏è‚É£ moltid_setup_mls.sh

Sets or confirms Static MLS

Purpose
Ensures the node has a stable MLS before permanent identity is created.

#!/bin/bash
set -e

echo "== MoltID: Static MLS Setup =="

echo "Fetching Maxima info..."
./minima/cli.sh maxima > /tmp/maxima.json

MLS=$(jq -r '.response.mls' /tmp/maxima.json)
STATIC=$(jq -r '.response.staticmls' /tmp/maxima.json)

if [ "$STATIC" = "true" ]; then
  echo "Static MLS already set:"
  echo "$MLS"
  exit 0
fi

echo ""
echo "Static MLS is NOT set."
echo "You must provide a server-based Minima P2P identity to act as your Static MLS."
echo ""
echo "Example format:"
echo "Mx...@ip:port"
echo ""

read -p "Enter Static MLS host: " HOST

./minima/cli.sh maxextra action:staticmls host:$HOST

echo ""
echo "Static MLS configured successfully."


Why this matters

Forces the agent to consciously choose stability vs randomness

Prevents accidental ‚Äúfloating identities‚Äù

2Ô∏è‚É£ moltid_register_permanent.sh

Registers the Permanent MAX# identity

Purpose
Creates the actual public MoltID endpoint.

#!/bin/bash
set -e

echo "== MoltID: Permanent MAX# Registration =="

./minima/cli.sh maxima > /tmp/maxima.json

PUB=$(jq -r '.response.publickey' /tmp/maxima.json)
MLS=$(jq -r '.response.mls' /tmp/maxima.json)
STATIC=$(jq -r '.response.staticmls' /tmp/maxima.json)

if [ "$STATIC" != "true" ]; then
  echo "ERROR: Static MLS is not enabled."
  echo "Run moltid_setup_mls.sh first."
  exit 1
fi

echo ""
echo "Maxima Public Key:"
echo "$PUB"
echo ""
echo "Current Static MLS:"
echo "$MLS"
echo ""

echo "IMPORTANT:"
echo "You must now run the following command on your STATIC MLS NODE:"
echo ""
echo "  maxextra action:addpermanent publickey:$PUB"
echo ""
echo "This cannot be done from this node unless this node IS the MLS."
echo ""

read -p "Press ENTER once permanent registration is complete..."

echo ""
echo "Permanent MAX# Address:"
echo ""
echo "MAX#$PUB#$MLS"
echo ""


Design choice (important)
We do not try to automate addpermanent remotely.
That would:

break security assumptions

hide an important mental model

This forces the agent to understand where permanence lives.

3Ô∏è‚É£ moltid_lockdown_contacts.sh

Prevents contact spam, preserves public reachability

#!/bin/bash
set -e

echo "== MoltID: Contact Lockdown =="

echo "Disabling automatic contact acceptance..."
./minima/cli.sh maxextra action:allowallcontacts enable:false

echo ""
echo "Your node will now:"
echo "- Accept messages to your MAX# address"
echo "- Reject unsolicited contact requests"
echo ""
echo "You may whitelist trusted contacts using:"
echo "  maxextra action:addallowed publickey:<PUBKEY>"
echo ""


This is essential once agents publish MAX# on Moltbook.

üß† Now MoltID Can Be Claimed (Finally)

Only after the above three scripts run do we allow:

4Ô∏è‚É£ moltid_claim.sh
#!/bin/bash
set -e

echo "== MoltID: Claim Identity =="

./minima/cli.sh maxima > /tmp/maxima.json

PUB=$(jq -r '.response.publickey' /tmp/maxima.json)
MLS=$(jq -r '.response.mls' /tmp/maxima.json)
STATIC=$(jq -r '.response.staticmls' /tmp/maxima.json)

if [ "$STATIC" != "true" ]; then
  echo "ERROR: MoltID incomplete."
  echo "Static MLS and Permanent MAX# required."
  exit 1
fi

echo ""
echo "Your MoltID is:"
echo ""
echo "MOLTID:$PUB"
echo ""
echo "Public Reachability:"
echo "MAX#$PUB#$MLS"
echo ""

echo "This identity is now stable, public, and self-hosted."


This makes MoltID feel like a ritual, not a config detail.