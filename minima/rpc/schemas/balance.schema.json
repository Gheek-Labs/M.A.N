{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "balance",
  "description": "Returns token balances for this node's wallet. Use 'balance tokendetails:true' for richer token metadata.",
  "type": "object",
  "properties": {
    "status": { "type": "boolean" },
    "response": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "token": {
            "type": ["string", "object"],
            "description": "Token display name (string for plain balance, object with name/url/description/ticker when tokendetails:true)"
          },
          "tokenid": {
            "type": "string",
            "description": "Token identifier. '0x00' = native Minima"
          },
          "confirmed": {
            "type": "string",
            "description": "Full wallet balance including locked coins. Use as 'full balance'."
          },
          "unconfirmed": {
            "type": "string",
            "description": "Received but pending confirmation. Use as 'pending'."
          },
          "sendable": {
            "type": "string",
            "description": "Available to spend right now (confirmed minus locked). USE AS PRIMARY BALANCE."
          },
          "coins": {
            "type": "string",
            "description": "Number of UTXO coins held for this token."
          },
          "total": {
            "type": "string",
            "description": "AGENT WARNING: This is the TOKEN MAX SUPPLY / HARDCAP, NOT wallet balance. ~1B for Minima. NEVER display as balance."
          },
          "details": {
            "type": "object",
            "description": "Only present when tokendetails:true and token is custom (not native Minima)",
            "properties": {
              "decimals": { "type": "integer", "description": "Decimal places (INTEGER). 0 = NFT (non-fungible)" },
              "script": { "type": "string", "description": "Token script" },
              "totalamount": { "type": "string", "description": "Total amount in smallest unit" },
              "scale": { "type": "string", "description": "Scale factor" },
              "created": { "type": "string", "description": "Block number when token was created" }
            }
          }
        },
        "required": ["token", "tokenid", "confirmed", "unconfirmed", "sendable", "coins", "total"]
      }
    }
  },
  "required": ["status", "response"],
  "x-agent-warnings": [
    "total is token max supply, NOT wallet balance",
    "Display sendable as primary balance",
    "All balance values (confirmed, sendable, etc.) are strings — parse with float() or Decimal",
    "Use tokendetails:true to get rich metadata including decimals for NFT detection",
    "NFT detection: filter for details.decimals == 0 (client-side, not a server parameter)",
    "When tokendetails:true, custom token's 'token' field becomes an object with name/url/description/ticker"
  ],
  "x-parameters": {
    "tokendetails": "true/false — include rich token metadata (default: false)",
    "address": "Filter by address",
    "confirmations": "Minimum confirmations"
  }
}
